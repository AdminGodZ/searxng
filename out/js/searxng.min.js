/**
 * @license
 * (C) Copyright Contributors to the SearXNG project.
 * (C) Copyright Contributors to the searx project (2014 - 2021).
 * SPDX-License-Identifier: AGPL-3.0-or-later
 */window.searxng=function(p,u){p.Element&&function(i){i.matches=i.matches||i.matchesSelector||i.webkitMatchesSelector||i.msMatchesSelector||function(a){for(var r=this,n=(r.parentNode||r.document).querySelectorAll(a),o=-1;n[++o]&&n[o]!=r;);return!!n[o]}}(Element.prototype);function l(i,a,r){try{i.call(a,r)}catch(n){console.log(n)}}var d=window.searxng||{};d.on=function(i,a,r,n){n=n||!1,typeof i!="string"?i.addEventListener(a,r,n):u.addEventListener(a,function(o){for(var e=o.target||o.srcElement,s=!1;e&&e.matches&&e!==u&&!(s=e.matches(i));)e=e.parentElement;s&&l(r,e,o)},n)},d.ready=function(i){document.readyState!="loading"?i.call(p):p.addEventListener("DOMContentLoaded",i.bind(p))},d.http=function(i,a,r=null){return new Promise(function(n,o){try{var e=new XMLHttpRequest;e.open(i,a,!0),e.timeout=2e4,e.onload=function(){e.status==200?n(e.response,e.responseType):o(Error(e.statusText))},e.onerror=function(){o(Error("Network Error"))},e.onabort=function(){o(Error("Transaction is aborted"))},e.ontimeout=function(){o(Error("Timeout"))},r?e.send(r):e.send()}catch(s){o(s)}})},d.loadStyle=function(i){var a=d.settings.theme_static_path+"/"+i,r="style_"+i.replace(".","_"),n=u.getElementById(r);n===null&&(n=u.createElement("link"),n.setAttribute("id",r),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",a),u.body.appendChild(n))},d.loadScript=function(i,a){var r=d.settings.theme_static_path+"/"+i,n="script_"+i.replace(".","_"),o=u.getElementById(n);if(o===null)o=u.createElement("script"),o.setAttribute("id",n),o.setAttribute("src",r),o.onload=a,o.onerror=function(){o.setAttribute("error","1")},u.body.appendChild(o);else if(o.hasAttribute("error"))console.log("callback not executed : script '"+r+"' not loaded.");else try{a.apply(o,[])}catch(e){console.log(e)}},d.insertBefore=function(i,a){a.parentNode.insertBefore(i,a)},d.insertAfter=function(i,a){a.parentNode.insertAfter(i,a.nextSibling)},d.on(".close","click",function(){this.parentNode.classList.add("invisible")});function m(){for(var i of u.getElementsByTagName("body")[0].classList.values())if(i.endsWith("_endpoint"))return i.split("_")[0];return""}return d.endpoint=m(),d}(window,document);searxng.ready(function(){if(searxng.infinite_scroll_supported="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,searxng.endpoint!=="results")return;if(!searxng.infinite_scroll_supported){console.log("IntersectionObserver not supported");return}let p=document;var u=p.getElementById("results").classList.contains("only_template_images");function l(){var i=p.createElement("div");return i.classList.add("loader"),i}function d(i,a){i.textContent="",a.forEach(r=>i.appendChild(r))}function m(i){var a=p.querySelector("#pagination form.next_page");if(a){d(p.querySelector("#pagination"),[l()]);var r=new FormData(a);searxng.http("POST",p.querySelector("#search").getAttribute("action"),r).then(function(n){var o=new DOMParser().parseFromString(n,"text/html"),e=o.querySelectorAll("#urls article"),s=o.querySelector("#pagination");p.querySelector("#pagination").remove(),e.length>0&&!u&&p.querySelector("#urls").appendChild(p.createElement("hr")),e.forEach(h=>{p.querySelector("#urls").appendChild(h)}),s&&(p.querySelector("#results").appendChild(s),i())}).catch(function(n){console.log(n);var o=p.createElement("div");o.textContent=searxng.settings.translations.error_loading_next_page,o.classList.add("dialog-error"),o.setAttribute("role","alert"),d(p.querySelector("#pagination"),[o])})}}if(searxng.settings.infinite_scroll&&searxng.infinite_scroll_supported){const i={rootMargin:"20rem"},a="article.result:last-child",r=new IntersectionObserver(n=>{const o=n[0];o.isIntersecting&&(r.unobserve(o.target),m(()=>r.observe(p.querySelector(a),i)))});r.observe(p.querySelector(a),i)}});searxng.ready(function(){function p(t){for(;t!==void 0;){if(t.classList.contains("detail"))return!0;if(t.classList.contains("result"))return!1;t=t.parentNode}return!1}function u(t){for(;t!==void 0;){if(t.classList.contains("result"))return t;t=t.parentNode}}function l(t){return t&&t.classList.contains("result-images")}searxng.on(".result","click",function(t){if(!p(t.target)){a(this)(!0,!0);let c=u(t.target);l(c)&&(t.preventDefault(),searxng.selectImage(c))}}),searxng.on(".result a","focus",function(t){if(!p(t.target)){let c=u(t.target);c&&c.getAttribute("data-vim-selected")===null&&a(c)(!0),l(c)&&searxng.selectImage(c)}},!0);var d={Escape:{key:"ESC",fun:n,des:"remove focus from the focused input",cat:"Control"},c:{key:"c",fun:x,des:"copy url of the selected result to the clipboard",cat:"Results"},h:{key:"h",fun:M,des:"toggle help window",cat:"Other"},i:{key:"i",fun:E,des:"focus on the search input",cat:"Control"},n:{key:"n",fun:e(),des:"go to next page",cat:"Results"},o:{key:"o",fun:A(!1),des:"open search result",cat:"Results"},p:{key:"p",fun:s(),des:"go to previous page",cat:"Results"},r:{key:"r",fun:r,des:"reload page from the server",cat:"Control"},t:{key:"t",fun:A(!0),des:"open the result in a new tab",cat:"Results"}},m={default:Object.assign({ArrowLeft:{key:"←",fun:a("up"),des:"select previous search result",cat:"Results"},ArrowRight:{key:"→",fun:a("down"),des:"select next search result",cat:"Results"}},d),vim:Object.assign({b:{key:"b",fun:y(-window.innerHeight),des:"scroll one page up",cat:"Navigation"},f:{key:"f",fun:y(window.innerHeight),des:"scroll one page down",cat:"Navigation"},u:{key:"u",fun:y(-window.innerHeight/2),des:"scroll half a page up",cat:"Navigation"},d:{key:"d",fun:y(window.innerHeight/2),des:"scroll half a page down",cat:"Navigation"},g:{key:"g",fun:_(-document.body.scrollHeight,"top"),des:"scroll to the top of the page",cat:"Navigation"},v:{key:"v",fun:_(document.body.scrollHeight,"bottom"),des:"scroll to the bottom of the page",cat:"Navigation"},k:{key:"k",fun:a("up"),des:"select previous search result",cat:"Results"},j:{key:"j",fun:a("down"),des:"select next search result",cat:"Results"},y:{key:"y",fun:x,des:"copy url of the selected result to the clipboard",cat:"Results"}},d)},i=m[searxng.settings.hotkeys]||m.default;searxng.on(document,"keydown",function(t){if(Object.prototype.hasOwnProperty.call(i,t.key)&&!t.ctrlKey&&!t.altKey&&!t.shiftKey&&!t.metaKey){var c=t.target.tagName.toLowerCase();t.key==="Escape"?i[t.key].fun(t):(t.target===document.body||c==="a"||c==="button")&&(t.preventDefault(),i[t.key].fun())}});function a(t){return function(c,w){var v=document.querySelector(".result[data-vim-selected]"),b=t;if(v===null){if(v=document.querySelector(".result"),v===null)return;(t==="down"||t==="up")&&(b=v)}var f,g=document.querySelectorAll(".result");if(g=Array.from(g),typeof b!="string")f=b;else switch(b){case"visible":for(var S=document.documentElement.scrollTop||document.body.scrollTop,O=S+document.documentElement.clientHeight,k=0;k<g.length;k++){f=g[k];var T=f.offsetTop,I=T+f.clientHeight;if(I<=O&&T>S)break}break;case"down":f=g[g.indexOf(v)+1]||v;break;case"up":f=g[g.indexOf(v)-1]||v;break;case"bottom":f=g[g.length-1];break;case"top":default:f=g[0]}if(f){if(v.removeAttribute("data-vim-selected"),f.setAttribute("data-vim-selected","true"),!w){var q=f.querySelector("h3 a")||f.querySelector("a");q!==null&&q.focus()}c||h()}}}function r(){document.location.reload(!0)}function n(t){const c=t.target.tagName.toLowerCase();document.activeElement&&(c==="input"||c==="select"||c==="textarea")?document.activeElement.blur():searxng.closeDetail()}function o(t){return function(){var c=document.querySelector(t);c&&c.click()}}function e(){return o('nav#pagination .next_page button[type="submit"]')}function s(){return o('nav#pagination .previous_page button[type="submit"]')}function h(){var t=document.querySelector(".result[data-vim-selected]");if(t!==null){var c=document.documentElement.scrollTop||document.body.scrollTop,w=document.documentElement.clientHeight,v=t.offsetTop,b=v+t.clientHeight,f=120;if(t.previousElementSibling===null&&b<w){window.scroll(window.scrollX,0);return}if(c>v-f)window.scroll(window.scrollX,v-f);else{var g=c+w;g<b+f&&window.scroll(window.scrollX,b-w+f)}}}function y(t){return function(){window.scrollBy(0,t),a("visible")()}}function _(t,c){return function(){window.scrollTo(0,t),a(c)()}}function E(){window.scrollTo(0,0);var t=document.querySelector("#q");if(t.focus(),t.setSelectionRange){var c=t.value.length;t.setSelectionRange(c,c)}}function A(t){return function(){var c=document.querySelector(".result[data-vim-selected] h3 a");if(c===null&&(c=document.querySelector(".result[data-vim-selected] > a")),c!==null){var w=c.getAttribute("href");t?window.open(w):window.location.href=w}}}function C(t){var c={};for(var w in i){var v=i[w];c[v.cat]=c[v.cat]||[],c[v.cat].push(v)}var b=Object.keys(c).sort(function(I,q){return c[q].length-c[I].length});if(b.length!==0){var f='<a href="#" class="close" aria-label="close" title="close">×</a>';f+="<h3>How to navigate SearXNG with hotkeys</h3>",f+="<table>";for(var g=0;g<b.length;g++){var S=c[b[g]],O=g===b.length-1,k=g%2===0;k&&(f+="<tr>"),f+="<td>",f+="<h4>"+S[0].cat+"</h4>",f+='<ul class="list-unstyled">';for(var T in S)f+="<li><kbd>"+S[T].key+"</kbd> "+S[T].des+"</li>";f+="</ul>",f+="</td>",(!k||O)&&(f+="</tr>")}f+="</table>",t.innerHTML=f}}function M(){var t=document.querySelector("#vim-hotkeys-help");if(t==null){t=document.createElement("div"),t.id="vim-hotkeys-help",t.className="dialog-modal",C(t);var c=document.getElementsByTagName("body")[0];c.appendChild(t)}else{t.classList.toggle("invisible");return}}function x(){var t=document.querySelector(".result[data-vim-selected] h3 a");if(t===null)return;const c=t.getAttribute("href");navigator.clipboard.writeText(c)}searxng.scrollPageToSelected=h,searxng.selectNext=a("down"),searxng.selectPrevious=a("up")});(function(p,u,l){l.ready(function(){l.on(".searxng_init_map","click",function(d){this.classList.remove("searxng_init_map");var m=this.dataset.leafletTarget,i=parseFloat(this.dataset.mapLon),a=parseFloat(this.dataset.mapLat),r=parseFloat(this.dataset.mapZoom),n=JSON.parse(this.dataset.mapBoundingbox),o=JSON.parse(this.dataset.mapGeojson);l.loadStyle("css/leaflet.css"),l.loadScript("js/leaflet.js",function(){var e=null;if(n){var s=L.latLng(n[0],n[2]),h=L.latLng(n[1],n[3]);e=L.latLngBounds(s,h)}var y=L.map(m),_="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",E='Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',A=new L.TileLayer(_,{minZoom:1,maxZoom:19,attribution:E}),C="https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png",M='Wikimedia maps | Maps data © <a href="https://openstreetmap.org">OpenStreetMap contributors</a>',x=new L.TileLayer(C,{minZoom:1,maxZoom:19,attribution:M});e?setTimeout(function(){y.fitBounds(e,{maxZoom:17})},0):i&&a&&(r?y.setView(new L.latLng(a,i),r):y.setView(new L.latLng(a,i),8)),y.addLayer(A);var t={"OSM Mapnik":A,"OSM Wikimedia":x};L.control.layers(t).addTo(y),o&&L.geoJson(o).addTo(y)}),d.preventDefault()})})})(window,document,window.searxng);(function(p,u,l){l.endpoint==="preferences"&&l.ready(function(){let d=null;function m(){d==null&&l.http("GET","engine_descriptions.json").then(function(e){d=JSON.parse(e);for(const[s,h]of Object.entries(d)){let y=u.querySelectorAll('[data-engine-name="'+s+'"] .engine-description');for(const _ of y){let E=" (<i>"+l.settings.translations.Source+":&nbsp;"+h[1]+"</i>)";_.innerHTML=h[0]+E}}})}for(const e of u.querySelectorAll("[data-engine-name]"))l.on(e,"mouseenter",m);const i=u.querySelectorAll(".enable-all-engines"),a=u.querySelectorAll(".disable-all-engines"),r=u.querySelectorAll("tbody input[type=checkbox][class~=checkbox-onoff]"),n=e=>{for(const s of r)s.offsetParent!==null&&(s.checked=!e)};for(const e of i)l.on(e,"click",()=>n(!0));for(const e of a)l.on(e,"click",()=>n(!1));const o=u.querySelector("#copy-hash");l.on(o,"click",e=>{e.preventDefault(),navigator.clipboard.writeText(o.dataset.hash),o.innerText=o.dataset.copiedText})})})(window,document,window.searxng);(function(p,u,l){l.endpoint==="results"&&l.ready(function(){u.querySelectorAll("#urls img").forEach(r=>r.addEventListener("error",()=>{r.src=window.searxng.settings.theme_static_path+"/img/img_load_error.svg"},{once:!0})),u.querySelector("#search_url button#copy_url")&&(u.querySelector("#search_url button#copy_url").style.display="block"),l.on(".btn-collapse","click",function(){var r=this.getAttribute("data-btn-text-collapsed"),n=this.getAttribute("data-btn-text-not-collapsed"),o=this.getAttribute("data-target"),e=u.querySelector(o),s=this.innerHTML;this.classList.contains("collapsed")?s=s.replace(r,n):s=s.replace(n,r),this.innerHTML=s,this.classList.toggle("collapsed"),e.classList.toggle("invisible")}),l.on(".media-loader","click",function(){var r=this.getAttribute("data-target"),n=u.querySelector(r+" > iframe"),o=n.getAttribute("src");(o==null||o===!1)&&n.setAttribute("src",n.getAttribute("data-src"))}),l.on("#copy_url","click",function(){var r=this.parentElement.querySelector("pre");navigator.clipboard.writeText(r.innerText),this.innerText=this.dataset.copiedText});let d;const m=u.createElement("div");m.classList.add("loader");const i=new Image,a=(r,n)=>{d&&clearTimeout(d),d=setTimeout(()=>{i.src=r},1e3),i.onload=()=>{n(),m.remove()},i.onerror=()=>{m.remove()}};l.selectImage=r=>{if(u.getElementById("results").classList.add("image-detail-open"),window.location.hash="#image-viewer",l.scrollPageToSelected(),!r)return;const n=r.querySelector(".result-images-source img");if(!n)return;const o=n.getAttribute("data-src");if(!o)return;const e=r.querySelector(".image_thumbnail");n.src=e.src,r.querySelector(".detail").appendChild(m),a(o,()=>{n.src=o,n.removeAttribute("data-src")})},l.closeDetail=function(){u.getElementById("results").classList.remove("image-detail-open"),window.location.hash=="#image-viewer"&&window.history.back(),l.scrollPageToSelected()},l.on(".result-detail-close","click",r=>{r.preventDefault(),l.closeDetail()}),l.on(".result-detail-previous","click",r=>{r.preventDefault(),l.selectPrevious(!1)}),l.on(".result-detail-next","click",r=>{r.preventDefault(),l.selectNext(!1)}),window.addEventListener("hashchange",()=>{window.location.hash!="#image-viewer"&&l.closeDetail()}),u.querySelectorAll(".swipe-horizontal").forEach(r=>{r.addEventListener("swiped-left",function(){l.selectNext(!1)}),r.addEventListener("swiped-right",function(){l.selectPrevious(!1)})}),p.addEventListener("scroll",function(){var r=u.getElementById("backToTop"),n=document.documentElement.scrollTop||document.body.scrollTop,o=u.getElementById("results");r!==null&&(n>=100?o.classList.add("scrolling"):o.classList.remove("scrolling"))},!0)})})(window,document,window.searxng);(function(p,u,l){var d="q",m;const i=window.matchMedia("only screen and (max-width: 50em)").matches;function a(){if(m.value.length>0){var n=document.getElementById("search");setTimeout(n.submit.bind(n),0)}}function r(n){var o=document.getElementById("clear_search"),e=function(){n.value.length===0?o.classList.add("empty"):o.classList.remove("empty")};e(),o.addEventListener("click",function(s){n.value="",n.focus(),e(),s.preventDefault()}),n.addEventListener("keydown",e,!1)}l.ready(function(){m=u.getElementById(d),m!==null&&(r(m),l.settings.autocomplete&&(l.autocomplete=AutoComplete.call(p,{Url:"./autocompleter",EmptyMessage:l.settings.translations.no_item_found,HttpMethod:l.settings.method,HttpHeaders:{"Content-type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},MinChars:l.settings.autocomplete_min,Delay:100,_Position:function(){},_Open:function(){var e=this;Array.prototype.forEach.call(this.DOMResults.getElementsByTagName("li"),function(s){s.getAttribute("class")!="locked"&&(s.onmousedown=function(){e._Select(s)})})},_Select:function(e){AutoComplete.defaults._Select.call(this,e);var s=e.closest("form");s&&s.submit()},_MinChars:function(){return this.Input.value.indexOf("!")>-1?0:AutoComplete.defaults._MinChars.call(this)},KeyboardMappings:Object.assign({},AutoComplete.defaults.KeyboardMappings,{KeyUpAndDown_up:Object.assign({},AutoComplete.defaults.KeyboardMappings.KeyUpAndDown_up,{Callback:function(e){AutoComplete.defaults.KeyboardMappings.KeyUpAndDown_up.Callback.call(this,e);var s=this.DOMResults.querySelector("li.active");s&&AutoComplete.defaults._Select.call(this,s)}}),Tab:Object.assign({},AutoComplete.defaults.KeyboardMappings.Enter,{Conditions:[{Is:9,Not:!1}],Callback:function(e){if(this.DOMResults.getAttribute("class").indexOf("open")!=-1){var s=this.DOMResults.querySelector("li.active");s!==null&&(AutoComplete.defaults._Select.call(this,s),e.preventDefault())}}})})},"#"+d)),AutoComplete.prototype.ajax=function(e,s,h){h===void 0&&(h=!0),e.$AjaxTimer&&window.clearTimeout(e.$AjaxTimer),h===!0?e.$AjaxTimer=window.setTimeout(AutoComplete.prototype.ajax.bind(null,e,s,!1),e.Delay):(e.Request&&e.Request.abort(),e.Request=s,e.Request.send(encodeURIComponent(e._QueryArg())+"="+encodeURIComponent(e._Pre())))},!i&&document.querySelector(".index_endpoint")&&m.focus()),m!==null&&l.settings.search_on_category_select&&u.querySelector(".search_filters")!=null&&(l.on(u.getElementById("safesearch"),"change",a),l.on(u.getElementById("time_range"),"change",a),l.on(u.getElementById("language"),"change",a));const n=u.querySelectorAll("button.category_button");for(let e of n)l.on(e,"click",s=>{if(s.shiftKey){s.preventDefault(),e.classList.toggle("selected");return}const h=u.querySelectorAll("button.category_button.selected");for(let y of h)y.classList.remove("selected");e.classList.add("selected")});const o=u.querySelector("#search");o!=null&&l.on(o,"submit",e=>{e.preventDefault();const s=u.querySelector("#selected-categories");if(s){let h=[];for(let y of n)y.classList.contains("selected")&&h.push(y.name.replace("category_",""));s.value=h.join(",")}o.submit()})})})(window,document,window.searxng);
//# sourceMappingURL=searxng.min.js.map
