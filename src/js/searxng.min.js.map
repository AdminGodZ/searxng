{"version":3,"file":"searxng.min.js","sources":["../src/js/main/00_toolkit.js","../src/js/main/favicons.js","../src/js/main/infinite_scroll.js","../src/js/main/keyboard.js","../src/js/main/mapresult.js","../src/js/main/preferences.js","../src/js/main/results.js","../src/js/main/search.js","../node_modules/autocomplete-js/dist/autocomplete.js"],"sourcesContent":["/**\n * @license\n * (C) Copyright Contributors to the SearXNG project.\n * (C) Copyright Contributors to the searx project (2014 - 2021).\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nwindow.searxng = (function (w, d) {\n\n  'use strict';\n\n  // not invented here tookit with bugs fixed elsewhere\n  // purposes : be just good enough and as small as possible\n\n  // from https://plainjs.com/javascript/events/live-binding-event-handlers-14/\n  if (w.Element) {\n    (function (ElementPrototype) {\n      ElementPrototype.matches = ElementPrototype.matches ||\n      ElementPrototype.matchesSelector ||\n      ElementPrototype.webkitMatchesSelector ||\n      ElementPrototype.msMatchesSelector ||\n      function (selector) {\n        var node = this, nodes = (node.parentNode || node.document).querySelectorAll(selector), i = -1;\n        while (nodes[++i] && nodes[i] != node);\n        return !!nodes[i];\n      };\n    })(Element.prototype);\n  }\n\n  function callbackSafe (callback, el, e) {\n    try {\n      callback.call(el, e);\n    } catch (exception) {\n      console.log(exception);\n    }\n  }\n\n  var searxng = window.searxng || {};\n\n  searxng.on = function (obj, eventType, callback, useCapture) {\n    useCapture = useCapture || false;\n    if (typeof obj !== 'string') {\n      // obj HTMLElement, HTMLDocument\n      obj.addEventListener(eventType, callback, useCapture);\n    } else {\n      // obj is a selector\n      d.addEventListener(eventType, function (e) {\n        var el = e.target || e.srcElement, found = false;\n        while (el && el.matches && el !== d && !(found = el.matches(obj))) el = el.parentElement;\n        if (found) callbackSafe(callback, el, e);\n      }, useCapture);\n    }\n  };\n\n  searxng.ready = function (callback) {\n    if (document.readyState != 'loading') {\n      callback.call(w);\n    } else {\n      w.addEventListener('DOMContentLoaded', callback.bind(w));\n    }\n  };\n\n  searxng.http = function (method, url, data = null) {\n    return new Promise(function (resolve, reject) {\n      try {\n        var req = new XMLHttpRequest();\n        req.open(method, url, true);\n        req.timeout = 20000;\n\n        // On load\n        req.onload = function () {\n          if (req.status == 200) {\n            resolve(req.response, req.responseType);\n          } else {\n            reject(Error(req.statusText));\n          }\n        };\n\n        // Handle network errors\n        req.onerror = function () {\n          reject(Error(\"Network Error\"));\n        };\n\n        req.onabort = function () {\n          reject(Error(\"Transaction is aborted\"));\n        };\n\n        req.ontimeout = function () {\n          reject(Error(\"Timeout\"));\n        }\n\n        // Make the request\n        if (data) {\n          req.send(data)\n        } else {\n          req.send();\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    });\n  };\n\n  searxng.loadStyle = function (src) {\n    var path = searxng.settings.theme_static_path + \"/\" + src,\n      id = \"style_\" + src.replace('.', '_'),\n      s = d.getElementById(id);\n    if (s === null) {\n      s = d.createElement('link');\n      s.setAttribute('id', id);\n      s.setAttribute('rel', 'stylesheet');\n      s.setAttribute('type', 'text/css');\n      s.setAttribute('href', path);\n      d.body.appendChild(s);\n    }\n  };\n\n  searxng.loadScript = function (src, callback) {\n    var path = searxng.settings.theme_static_path + \"/\" + src,\n      id = \"script_\" + src.replace('.', '_'),\n      s = d.getElementById(id);\n    if (s === null) {\n      s = d.createElement('script');\n      s.setAttribute('id', id);\n      s.setAttribute('src', path);\n      s.onload = callback;\n      s.onerror = function () {\n        s.setAttribute('error', '1');\n      };\n      d.body.appendChild(s);\n    } else if (!s.hasAttribute('error')) {\n      try {\n        callback.apply(s, []);\n      } catch (exception) {\n        console.log(exception);\n      }\n    } else {\n      console.log(\"callback not executed : script '\" + path + \"' not loaded.\");\n    }\n  };\n\n  searxng.insertBefore = function (newNode, referenceNode) {\n    referenceNode.parentNode.insertBefore(newNode, referenceNode);\n  };\n\n  searxng.insertAfter = function (newNode, referenceNode) {\n    referenceNode.parentNode.insertAfter(newNode, referenceNode.nextSibling);\n  };\n\n  searxng.on('.close', 'click', function () {\n    this.parentNode.classList.add('invisible');\n  });\n\n  function getEndpoint () {\n    for (var className of d.getElementsByTagName('body')[0].classList.values()) {\n      if (className.endsWith('_endpoint')) {\n        return className.split('_')[0];\n      }\n    }\n    return '';\n  }\n\n  searxng.endpoint = getEndpoint();\n\n  return searxng;\n})(window, document);\n","// SPDX-License-Identifier: AGPL-3.0-or-later\n\n/* global searxng */\n\nsearxng.ready(function () {\n  'use strict';\n\n  if (searxng.endpoint !== 'results') {\n    return;\n  }\n\n  const defaultFavicon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsSAAALEgHS3X78AAACiElEQVQ4EaVTzU8TURCf2tJuS7tQtlRb6UKBIkQwkRRSEzkQgyEc6lkOKgcOph78Y+CgjXjDs2i44FXY9AMTlQRUELZapVlouy3d7kKtb0Zr0MSLTvL2zb75eL838xtTvV6H/xELBptMJojeXLCXyobnyog4YhzXYvmCFi6qVSfaeRdXdrfaU1areV5KykmX06rcvzumjY/1ggkR3Jh+bNf1mr8v1D5bLuvR3qDgFbvbBJYIrE1mCIoCrKxsHuzK+Rzvsi29+6DEbTZz9unijEYI8ObBgXOzlcrx9OAlXyDYKUCzwwrDQx1wVDGg089Dt+gR3mxmhcUnaWeoxwMbm/vzDFzmDEKMMNhquRqduT1KwXiGt0vre6iSeAUHNDE0d26NBtAXY9BACQyjFusKuL2Ry+IPb/Y9ZglwuVscdHaknUChqLF/O4jn3V5dP4mhgRJgwSYm+gV0Oi3XrvYB30yvhGa7BS70eGFHPoTJyQHhMK+F0ZesRVVznvXw5Ixv7/C10moEo6OZXbWvlFAF9FVZDOqEABUMRIkMd8GnLwVWg9/RkJF9sA4oDfYQAuzzjqzwvnaRUFxn/X2ZlmGLXAE7AL52B4xHgqAUqrC1nSNuoJkQtLkdqReszz/9aRvq90NOKdOS1nch8TpL555WDp49f3uAMXhACRjD5j4ykuCtf5PP7Fm1b0DIsl/VHGezzP1KwOiZQobFF9YyjSRYQETRENSlVzI8iK9mWlzckpSSCQHVALmN9Az1euDho9Xo8vKGd2rqooA8yBcrwHgCqYR0kMkWci08t/R+W4ljDCanWTg9TJGwGNaNk3vYZ7VUdeKsYJGFNkfSzjXNrSX20s4/h6kB81/271ghG17l+rPTAAAAAElFTkSuQmCC'\n\n  function addFavicons () {\n    document.querySelectorAll('.result > .url_wrapper, .result > .result_header').forEach(el => {\n      if (el.querySelector('.favicon')) {\n        return;\n      }\n\n      const link = el.href || el.querySelector('a').href;\n      const host = new URL(link).host;\n      const icon = document.createElement('img');\n      const currentDomain = window.location.hostname;\n\n      icon.className = 'favicon';\n      icon.alt = host;\n      icon.src = `https://${currentDomain}/favicon/${host}`;\n      icon.onerror = () => {\n        icon.src = defaultFavicon;\n      };\n\n      el.prepend(icon);\n    });\n  }\n\n  // Initial call to add favicons to existing elements\n  addFavicons();\n\n  // Set up a MutationObserver to watch for new elements\n  const observer = new MutationObserver(mutations => {\n    mutations.forEach(mutation => {\n      if (mutation.type === 'childList') {\n        mutation.addedNodes.forEach(node => {\n          if (node.nodeType === 1) { // Check if node is an element\n            if (node.matches('.result > .url_wrapper, .result > .result_header')) {\n              addFavicons();\n            } else if (node.querySelector('.result > .url_wrapper, .result > .result_header')) {\n              addFavicons();\n            }\n          }\n        });\n      }\n    });\n  });\n\n  // Start observing the results container for changes\n  const resultsContainer = document.querySelector('#results');\n  if (resultsContainer) {\n    observer.observe(resultsContainer, { childList: true, subtree: true });\n  }\n});\n","// SPDX-License-Identifier: AGPL-3.0-or-later\n\n/* global searxng */\n\nsearxng.ready(function () {\n  'use strict';\n\n  searxng.infinite_scroll_supported = (\n    'IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in window.IntersectionObserverEntry.prototype);\n\n  if (searxng.endpoint !== 'results') {\n    return;\n  }\n\n  if (!searxng.infinite_scroll_supported) {\n    console.log('IntersectionObserver not supported');\n    return;\n  }\n\n  let d = document;\n  var onlyImages = d.getElementById('results').classList.contains('only_template_images');\n\n  function newLoadSpinner () {\n    var loader = d.createElement('div');\n    loader.classList.add('loader');\n    return loader;\n  }\n\n  function replaceChildrenWith (element, children) {\n    element.textContent = '';\n    children.forEach(child => element.appendChild(child));\n  }\n\n  function loadNextPage (callback) {\n    var form = d.querySelector('#pagination form.next_page');\n    if (!form) {\n      return\n    }\n    replaceChildrenWith(d.querySelector('#pagination'), [ newLoadSpinner() ]);\n    var formData = new FormData(form);\n    searxng.http('POST', d.querySelector('#search').getAttribute('action'), formData).then(\n      function (response) {\n        var nextPageDoc = new DOMParser().parseFromString(response, 'text/html');\n        var articleList = nextPageDoc.querySelectorAll('#urls article');\n        var paginationElement = nextPageDoc.querySelector('#pagination');\n        d.querySelector('#pagination').remove();\n        if (articleList.length > 0 && !onlyImages) {\n          // do not add <hr> element when there are only images\n          d.querySelector('#urls').appendChild(d.createElement('hr'));\n        }\n        articleList.forEach(articleElement => {\n          d.querySelector('#urls').appendChild(articleElement);\n        });\n        if (paginationElement) {\n          d.querySelector('#results').appendChild(paginationElement);\n          callback();\n        }\n      }\n    ).catch(\n      function (err) {\n        console.log(err);\n        var e = d.createElement('div');\n        e.textContent = searxng.settings.translations.error_loading_next_page;\n        e.classList.add('dialog-error');\n        e.setAttribute('role', 'alert');\n        replaceChildrenWith(d.querySelector('#pagination'), [ e ]);\n      }\n    )\n  }\n\n  if (searxng.settings.infinite_scroll && searxng.infinite_scroll_supported) {\n    const intersectionObserveOptions = {\n      rootMargin: \"20rem\",\n    };\n    const observedSelector = 'article.result:last-child';\n    const observer = new IntersectionObserver(entries => {\n      const paginationEntry = entries[0];\n      if (paginationEntry.isIntersecting) {\n        observer.unobserve(paginationEntry.target);\n        loadNextPage(() => observer.observe(d.querySelector(observedSelector), intersectionObserveOptions));\n      }\n    });\n    observer.observe(d.querySelector(observedSelector), intersectionObserveOptions);\n  }\n\n});\n","/* SPDX-License-Identifier: AGPL-3.0-or-later */\n/* global searxng */\n\nsearxng.ready(function () {\n\n  function isElementInDetail (el) {\n    while (el !== undefined) {\n      if (el.classList.contains('detail')) {\n        return true;\n      }\n      if (el.classList.contains('result')) {\n        // we found a result, no need to go to the root of the document:\n        // el is not inside a <div class=\"detail\"> element\n        return false;\n      }\n      el = el.parentNode;\n    }\n    return false;\n  }\n\n  function getResultElement (el) {\n    while (el !== undefined) {\n      if (el.classList.contains('result')) {\n        return el;\n      }\n      el = el.parentNode;\n    }\n    return undefined;\n  }\n\n  function isImageResult (resultElement) {\n    return resultElement && resultElement.classList.contains('result-images');\n  }\n\n  searxng.on('.result', 'click', function (e) {\n    if (!isElementInDetail(e.target)) {\n      highlightResult(this)(true, true);\n      let resultElement = getResultElement(e.target);\n      if (isImageResult(resultElement)) {\n        e.preventDefault();\n        searxng.selectImage(resultElement);\n      }\n    }\n  });\n\n  searxng.on('.result a', 'focus', function (e) {\n    if (!isElementInDetail(e.target)) {\n      let resultElement = getResultElement(e.target);\n      if (resultElement && resultElement.getAttribute(\"data-vim-selected\") === null) {\n        highlightResult(resultElement)(true);\n      }\n      if (isImageResult(resultElement)) {\n        searxng.selectImage(resultElement);\n      }\n    }\n  }, true);\n\n  /* common base for layouts */\n  var baseKeyBinding = {\n    'Escape': {\n      key: 'ESC',\n      fun: removeFocus,\n      des: 'remove focus from the focused input',\n      cat: 'Control'\n    },\n    'c': {\n      key: 'c',\n      fun: copyURLToClipboard,\n      des: 'copy url of the selected result to the clipboard',\n      cat: 'Results'\n    },\n    'h': {\n      key: 'h',\n      fun: toggleHelp,\n      des: 'toggle help window',\n      cat: 'Other'\n    },\n    'i': {\n      key: 'i',\n      fun: searchInputFocus,\n      des: 'focus on the search input',\n      cat: 'Control'\n    },\n    'n': {\n      key: 'n',\n      fun: GoToNextPage(),\n      des: 'go to next page',\n      cat: 'Results'\n    },\n    'o': {\n      key: 'o',\n      fun: openResult(false),\n      des: 'open search result',\n      cat: 'Results'\n    },\n    'p': {\n      key: 'p',\n      fun: GoToPreviousPage(),\n      des: 'go to previous page',\n      cat: 'Results'\n    },\n    'r': {\n      key: 'r',\n      fun: reloadPage,\n      des: 'reload page from the server',\n      cat: 'Control'\n    },\n    't': {\n      key: 't',\n      fun: openResult(true),\n      des: 'open the result in a new tab',\n      cat: 'Results'\n    },\n  };\n  var keyBindingLayouts = {\n\n    \"default\": Object.assign(\n      { /* SearXNG layout */\n        'ArrowLeft': {\n          key: '←',\n          fun: highlightResult('up'),\n          des: 'select previous search result',\n          cat: 'Results'\n        },\n        'ArrowRight': {\n          key: '→',\n          fun: highlightResult('down'),\n          des: 'select next search result',\n          cat: 'Results'\n        },\n      }, baseKeyBinding),\n\n    'vim': Object.assign(\n      { /* Vim-like Key Layout. */\n        'b': {\n          key: 'b',\n          fun: scrollPage(-window.innerHeight),\n          des: 'scroll one page up',\n          cat: 'Navigation'\n        },\n        'f': {\n          key: 'f',\n          fun: scrollPage(window.innerHeight),\n          des: 'scroll one page down',\n          cat: 'Navigation'\n        },\n        'u': {\n          key: 'u',\n          fun: scrollPage(-window.innerHeight / 2),\n          des: 'scroll half a page up',\n          cat: 'Navigation'\n        },\n        'd': {\n          key: 'd',\n          fun: scrollPage(window.innerHeight / 2),\n          des: 'scroll half a page down',\n          cat: 'Navigation'\n        },\n        'g': {\n          key: 'g',\n          fun: scrollPageTo(-document.body.scrollHeight, 'top'),\n          des: 'scroll to the top of the page',\n          cat: 'Navigation'\n        },\n        'v': {\n          key: 'v',\n          fun: scrollPageTo(document.body.scrollHeight, 'bottom'),\n          des: 'scroll to the bottom of the page',\n          cat: 'Navigation'\n        },\n        'k': {\n          key: 'k',\n          fun: highlightResult('up'),\n          des: 'select previous search result',\n          cat: 'Results'\n        },\n        'j': {\n          key: 'j',\n          fun: highlightResult('down'),\n          des: 'select next search result',\n          cat: 'Results'\n        },\n        'y': {\n          key: 'y',\n          fun: copyURLToClipboard,\n          des: 'copy url of the selected result to the clipboard',\n          cat: 'Results'\n        },\n      }, baseKeyBinding)\n  }\n\n  var keyBindings = keyBindingLayouts[searxng.settings.hotkeys] || keyBindingLayouts.default;\n\n  searxng.on(document, \"keydown\", function (e) {\n    // check for modifiers so we don't break browser's hotkeys\n    if (\n      Object.prototype.hasOwnProperty.call(keyBindings, e.key)\n        && !e.ctrlKey && !e.altKey\n        && !e.shiftKey && !e.metaKey\n    ) {\n      var tagName = e.target.tagName.toLowerCase();\n      if (e.key === 'Escape') {\n        keyBindings[e.key].fun(e);\n      } else {\n        if (e.target === document.body || tagName === 'a' || tagName === 'button') {\n          e.preventDefault();\n          keyBindings[e.key].fun();\n        }\n      }\n    }\n  });\n\n  function highlightResult (which) {\n    return function (noScroll, keepFocus) {\n      var current = document.querySelector('.result[data-vim-selected]'),\n        effectiveWhich = which;\n      if (current === null) {\n        // no selection : choose the first one\n        current = document.querySelector('.result');\n        if (current === null) {\n          // no first one : there are no results\n          return;\n        }\n        // replace up/down actions by selecting first one\n        if (which === \"down\" || which === \"up\") {\n          effectiveWhich = current;\n        }\n      }\n\n      var next, results = document.querySelectorAll('.result');\n      results = Array.from(results);  // convert NodeList to Array for further use\n\n      if (typeof effectiveWhich !== 'string') {\n        next = effectiveWhich;\n      } else {\n        switch (effectiveWhich) {\n        case 'visible':\n          var top = document.documentElement.scrollTop || document.body.scrollTop;\n          var bot = top + document.documentElement.clientHeight;\n\n          for (var i = 0; i < results.length; i++) {\n            next = results[i];\n            var etop = next.offsetTop;\n            var ebot = etop + next.clientHeight;\n\n            if ((ebot <= bot) && (etop > top)) {\n              break;\n            }\n          }\n          break;\n        case 'down':\n          next = results[results.indexOf(current) + 1] || current;\n          break;\n        case 'up':\n          next = results[results.indexOf(current) - 1] || current;\n          break;\n        case 'bottom':\n          next = results[results.length - 1];\n          break;\n        case 'top':\n          /* falls through */\n        default:\n          next = results[0];\n        }\n      }\n\n      if (next) {\n        current.removeAttribute('data-vim-selected');\n        next.setAttribute('data-vim-selected', 'true');\n        if (!keepFocus) {\n          var link = next.querySelector('h3 a') || next.querySelector('a');\n          if (link !== null) {\n            link.focus();\n          }\n        }\n        if (!noScroll) {\n          scrollPageToSelected();\n        }\n      }\n    };\n  }\n\n  function reloadPage () {\n    document.location.reload(true);\n  }\n\n  function removeFocus (e) {\n    const tagName = e.target.tagName.toLowerCase();\n    if (document.activeElement && (tagName === 'input' || tagName === 'select' || tagName === 'textarea')) {\n      document.activeElement.blur();\n    } else {\n      searxng.closeDetail();\n    }\n  }\n\n  function pageButtonClick (css_selector) {\n    return function () {\n      var button = document.querySelector(css_selector);\n      if (button) {\n        button.click();\n      }\n    };\n  }\n\n  function GoToNextPage () {\n    return pageButtonClick('nav#pagination .next_page button[type=\"submit\"]');\n  }\n\n  function GoToPreviousPage () {\n    return pageButtonClick('nav#pagination .previous_page button[type=\"submit\"]');\n  }\n\n  function scrollPageToSelected () {\n    var sel = document.querySelector('.result[data-vim-selected]');\n    if (sel === null) {\n      return;\n    }\n    var wtop = document.documentElement.scrollTop || document.body.scrollTop,\n      wheight = document.documentElement.clientHeight,\n      etop = sel.offsetTop,\n      ebot = etop + sel.clientHeight,\n      offset = 120;\n    // first element ?\n    if ((sel.previousElementSibling === null) && (ebot < wheight)) {\n      // set to the top of page if the first element\n      // is fully included in the viewport\n      window.scroll(window.scrollX, 0);\n      return;\n    }\n    if (wtop > (etop - offset)) {\n      window.scroll(window.scrollX, etop - offset);\n    } else {\n      var wbot = wtop + wheight;\n      if (wbot < (ebot + offset)) {\n        window.scroll(window.scrollX, ebot - wheight + offset);\n      }\n    }\n  }\n\n  function scrollPage (amount) {\n    return function () {\n      window.scrollBy(0, amount);\n      highlightResult('visible')();\n    };\n  }\n\n  function scrollPageTo (position, nav) {\n    return function () {\n      window.scrollTo(0, position);\n      highlightResult(nav)();\n    };\n  }\n\n  function searchInputFocus () {\n    window.scrollTo(0, 0);\n    var q = document.querySelector('#q');\n    q.focus();\n    if (q.setSelectionRange) {\n      var len = q.value.length;\n      q.setSelectionRange(len, len);\n    }\n  }\n\n  function openResult (newTab) {\n    return function () {\n      var link = document.querySelector('.result[data-vim-selected] h3 a');\n      if (link === null) {\n        link = document.querySelector('.result[data-vim-selected] > a');\n      }\n      if (link !== null) {\n        var url = link.getAttribute('href');\n        if (newTab) {\n          window.open(url);\n        } else {\n          window.location.href = url;\n        }\n      }\n    };\n  }\n\n  function initHelpContent (divElement) {\n    var categories = {};\n\n    for (var k in keyBindings) {\n      var key = keyBindings[k];\n      categories[key.cat] = categories[key.cat] || [];\n      categories[key.cat].push(key);\n    }\n\n    var sorted = Object.keys(categories).sort(function (a, b) {\n      return categories[b].length - categories[a].length;\n    });\n\n    if (sorted.length === 0) {\n      return;\n    }\n\n    var html = '<a href=\"#\" class=\"close\" aria-label=\"close\" title=\"close\">×</a>';\n    html += '<h3>How to navigate SearXNG with hotkeys</h3>';\n    html += '<table>';\n\n    for (var i = 0; i < sorted.length; i++) {\n      var cat = categories[sorted[i]];\n\n      var lastCategory = i === (sorted.length - 1);\n      var first = i % 2 === 0;\n\n      if (first) {\n        html += '<tr>';\n      }\n      html += '<td>';\n\n      html += '<h4>' + cat[0].cat + '</h4>';\n      html += '<ul class=\"list-unstyled\">';\n\n      for (var cj in cat) {\n        html += '<li><kbd>' + cat[cj].key + '</kbd> ' + cat[cj].des + '</li>';\n      }\n\n      html += '</ul>';\n      html += '</td>'; // col-sm-*\n\n      if (!first || lastCategory) {\n        html += '</tr>'; // row\n      }\n    }\n\n    html += '</table>';\n\n    divElement.innerHTML = html;\n  }\n\n  function toggleHelp () {\n    var helpPanel = document.querySelector('#vim-hotkeys-help');\n    if (helpPanel === undefined || helpPanel === null) {\n      // first call\n      helpPanel = document.createElement('div');\n      helpPanel.id = 'vim-hotkeys-help';\n      helpPanel.className = 'dialog-modal';\n      initHelpContent(helpPanel);\n      var body = document.getElementsByTagName('body')[0];\n      body.appendChild(helpPanel);\n    } else {\n      // togggle hidden\n      helpPanel.classList.toggle('invisible');\n      return;\n    }\n  }\n\n  function copyURLToClipboard () {\n    var currentUrlElement = document.querySelector('.result[data-vim-selected] h3 a');\n    if (currentUrlElement === null) return;\n\n    const url = currentUrlElement.getAttribute('href');\n    navigator.clipboard.writeText(url);\n  }\n\n  searxng.scrollPageToSelected = scrollPageToSelected;\n  searxng.selectNext = highlightResult('down');\n  searxng.selectPrevious = highlightResult('up');\n});\n","/* SPDX-License-Identifier: AGPL-3.0-or-later */\n/* global L */\n(function (w, d, searxng) {\n  'use strict';\n\n  searxng.ready(function () {\n    searxng.on('.searxng_init_map', 'click', function (event) {\n      // no more request\n      this.classList.remove(\"searxng_init_map\");\n\n      //\n      var leaflet_target = this.dataset.leafletTarget;\n      var map_lon = parseFloat(this.dataset.mapLon);\n      var map_lat = parseFloat(this.dataset.mapLat);\n      var map_zoom = parseFloat(this.dataset.mapZoom);\n      var map_boundingbox = JSON.parse(this.dataset.mapBoundingbox);\n      var map_geojson = JSON.parse(this.dataset.mapGeojson);\n\n      searxng.loadStyle('css/leaflet.css');\n      searxng.loadScript('js/leaflet.js', function () {\n        var map_bounds = null;\n        if (map_boundingbox) {\n          var southWest = L.latLng(map_boundingbox[0], map_boundingbox[2]);\n          var northEast = L.latLng(map_boundingbox[1], map_boundingbox[3]);\n          map_bounds = L.latLngBounds(southWest, northEast);\n        }\n\n        // init map\n        var map = L.map(leaflet_target);\n        // create the tile layer with correct attribution\n        var osmMapnikUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n        var osmMapnikAttrib = 'Map data © <a href=\"https://openstreetmap.org\">OpenStreetMap</a> contributors';\n        var osmMapnik = new L.TileLayer(osmMapnikUrl, {minZoom: 1, maxZoom: 19, attribution: osmMapnikAttrib});\n        var osmWikimediaUrl = 'https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png';\n        var osmWikimediaAttrib = 'Wikimedia maps | Maps data © <a href=\"https://openstreetmap.org\">OpenStreetMap contributors</a>';\n        var osmWikimedia = new L.TileLayer(osmWikimediaUrl, {minZoom: 1, maxZoom: 19, attribution: osmWikimediaAttrib});\n        // init map view\n        if (map_bounds) {\n          // TODO hack: https://github.com/Leaflet/Leaflet/issues/2021\n          // Still useful ?\n          setTimeout(function () {\n            map.fitBounds(map_bounds, {\n              maxZoom: 17\n            });\n          }, 0);\n        } else if (map_lon && map_lat) {\n          if (map_zoom) {\n            map.setView(new L.latLng(map_lat, map_lon), map_zoom);\n          } else {\n            map.setView(new L.latLng(map_lat, map_lon), 8);\n          }\n        }\n\n        map.addLayer(osmMapnik);\n\n        var baseLayers = {\n          \"OSM Mapnik\": osmMapnik,\n          \"OSM Wikimedia\": osmWikimedia,\n        };\n\n        L.control.layers(baseLayers).addTo(map);\n\n        if (map_geojson) {\n          L.geoJson(map_geojson).addTo(map);\n        } /* else if(map_bounds) {\n          L.rectangle(map_bounds, {color: \"#ff7800\", weight: 3, fill:false}).addTo(map);\n        } */\n      });\n\n      // this event occour only once per element\n      event.preventDefault();\n    });\n  });\n})(window, document, window.searxng);\n","/* SPDX-License-Identifier: AGPL-3.0-or-later */\n(function (w, d, searxng) {\n  'use strict';\n\n  if (searxng.endpoint !== 'preferences') {\n    return;\n  }\n\n  searxng.ready(function () {\n    let engine_descriptions = null;\n    function load_engine_descriptions () {\n      if (engine_descriptions == null) {\n        searxng.http(\"GET\", \"engine_descriptions.json\").then(function (content) {\n          engine_descriptions = JSON.parse(content);\n          for (const [engine_name, description] of Object.entries(engine_descriptions)) {\n            let elements = d.querySelectorAll('[data-engine-name=\"' + engine_name + '\"] .engine-description');\n            for (const element of elements) {\n              let source = ' (<i>' + searxng.settings.translations.Source + ':&nbsp;' + description[1] + '</i>)';\n              element.innerHTML = description[0] + source;\n            }\n          }\n        });\n      }\n    }\n\n    for (const el of d.querySelectorAll('[data-engine-name]')) {\n      searxng.on(el, 'mouseenter', load_engine_descriptions);\n    }\n\n    const enableAllEngines = d.querySelectorAll(\".enable-all-engines\");\n    const disableAllEngines = d.querySelectorAll(\".disable-all-engines\");\n    const engineToggles = d.querySelectorAll('tbody input[type=checkbox][class~=checkbox-onoff]');\n    const toggleEngines = (enable) => {\n      for (const el of engineToggles) {\n        // check if element visible, so that only engines of the current category are modified\n        if (el.offsetParent !== null) el.checked = !enable;\n      }\n    };\n    for (const el of enableAllEngines) {\n      searxng.on(el, 'click', () => toggleEngines(true));\n    }\n    for (const el of disableAllEngines) {\n      searxng.on(el, 'click', () => toggleEngines(false));\n    }\n\n    const copyHashButton = d.querySelector(\"#copy-hash\");\n    searxng.on(copyHashButton, 'click', (e) => {\n      e.preventDefault();\n      navigator.clipboard.writeText(copyHashButton.dataset.hash);\n      copyHashButton.innerText = copyHashButton.dataset.copiedText;\n    });\n  });\n})(window, document, window.searxng);\n","/* SPDX-License-Identifier: AGPL-3.0-or-later */\n(function (w, d, searxng) {\n  'use strict';\n\n  if (searxng.endpoint !== 'results') {\n    return;\n  }\n\n  searxng.ready(function () {\n    d.querySelectorAll('#urls img.image').forEach(\n      img =>\n        img.addEventListener(\n          'error', () => {\n            img.style.display = 'none';\n            img.error = null;\n          }\n        ));\n\n    if (d.querySelector('#search_url button#copy_url')) {\n      d.querySelector('#search_url button#copy_url').style.display = \"block\";\n    }\n\n    searxng.on('.btn-collapse', 'click', function () {\n      var btnLabelCollapsed = this.getAttribute('data-btn-text-collapsed');\n      var btnLabelNotCollapsed = this.getAttribute('data-btn-text-not-collapsed');\n      var target = this.getAttribute('data-target');\n      var targetElement = d.querySelector(target);\n      var html = this.innerHTML;\n      if (this.classList.contains('collapsed')) {\n        html = html.replace(btnLabelCollapsed, btnLabelNotCollapsed);\n      } else {\n        html = html.replace(btnLabelNotCollapsed, btnLabelCollapsed);\n      }\n      this.innerHTML = html;\n      this.classList.toggle('collapsed');\n      targetElement.classList.toggle('invisible');\n    });\n\n    searxng.on('.media-loader', 'click', function () {\n      var target = this.getAttribute('data-target');\n      var iframe_load = d.querySelector(target + ' > iframe');\n      var srctest = iframe_load.getAttribute('src');\n      if (srctest === null || srctest === undefined || srctest === false) {\n        iframe_load.setAttribute('src', iframe_load.getAttribute('data-src'));\n      }\n    });\n\n    searxng.on('#copy_url', 'click', function () {\n      var target = this.parentElement.querySelector('pre');\n      navigator.clipboard.writeText(target.innerText);\n      this.innerText = this.dataset.copiedText;\n    });\n\n    searxng.selectImage = function (resultElement) {\n      /* eslint no-unused-vars: 0 */\n      if (resultElement) {\n        // load full size image in background\n        const imgElement = resultElement.querySelector('.result-images-source img');\n        const thumbnailElement = resultElement.querySelector('.image_thumbnail');\n        const detailElement = resultElement.querySelector('.detail');\n        if (imgElement) {\n          const imgSrc = imgElement.getAttribute('data-src');\n          if (imgSrc) {\n            const loader = d.createElement('div');\n            const imgLoader = new Image();\n\n            loader.classList.add('loader');\n            detailElement.appendChild(loader);\n\n            imgLoader.onload = e => {\n              imgElement.src = imgSrc;\n              loader.remove();\n            };\n            imgLoader.onerror = e => {\n              loader.remove();\n            };\n            imgLoader.src = imgSrc;\n            imgElement.src = thumbnailElement.src;\n            imgElement.removeAttribute('data-src');\n          }\n        }\n      }\n      d.getElementById('results').classList.add('image-detail-open');\n      searxng.scrollPageToSelected();\n    }\n\n    searxng.closeDetail = function (e) {\n      d.getElementById('results').classList.remove('image-detail-open');\n      searxng.scrollPageToSelected();\n    }\n    searxng.on('.result-detail-close', 'click', e => {\n      e.preventDefault();\n      searxng.closeDetail();\n    });\n    searxng.on('.result-detail-previous', 'click', e => {\n      e.preventDefault();\n      searxng.selectPrevious(false)\n    });\n    searxng.on('.result-detail-next', 'click', e => {\n      e.preventDefault();\n      searxng.selectNext(false);\n    });\n\n    w.addEventListener('scroll', function () {\n      var e = d.getElementById('backToTop'),\n        scrollTop = document.documentElement.scrollTop || document.body.scrollTop,\n        results = d.getElementById('results');\n      if (e !== null) {\n        if (scrollTop >= 100) {\n          results.classList.add('scrolling');\n        } else {\n          results.classList.remove('scrolling');\n        }\n      }\n    }, true);\n\n  });\n\n})(window, document, window.searxng);\n","/* SPDX-License-Identifier: AGPL-3.0-or-later */\n/* global AutoComplete */\n(function (w, d, searxng) {\n  'use strict';\n\n  var qinput_id = \"q\", qinput;\n\n  const isMobile = window.matchMedia(\"only screen and (max-width: 50em)\").matches;\n\n  function submitIfQuery () {\n    if (qinput.value.length  > 0) {\n      var search = document.getElementById('search');\n      setTimeout(search.submit.bind(search), 0);\n    }\n  }\n\n  function createClearButton (qinput) {\n    var cs = document.getElementById('clear_search');\n    var updateClearButton = function () {\n      if (qinput.value.length === 0) {\n        cs.classList.add(\"empty\");\n      } else {\n        cs.classList.remove(\"empty\");\n      }\n    };\n\n    // update status, event listener\n    updateClearButton();\n    cs.addEventListener('click', function (ev) {\n      qinput.value = '';\n      qinput.focus();\n      updateClearButton();\n      ev.preventDefault();\n    });\n    qinput.addEventListener('keyup', updateClearButton, false);\n  }\n\n  searxng.ready(function () {\n    qinput = d.getElementById(qinput_id);\n\n    if (qinput !== null) {\n      // clear button\n      createClearButton(qinput);\n\n      // autocompleter\n      if (searxng.settings.autocomplete_provider) {\n        searxng.autocomplete = AutoComplete.call(w, {\n          Url: \"./autocompleter\",\n          EmptyMessage: searxng.settings.translations.no_item_found,\n          HttpMethod: searxng.settings.http_method,\n          HttpHeaders: {\n            \"Content-type\": \"application/x-www-form-urlencoded\",\n            \"X-Requested-With\": \"XMLHttpRequest\"\n          },\n          MinChars: searxng.settings.autocomplete_min,\n          Delay: 300,\n          _Position: function () {},\n          _Open: function () {\n            var params = this;\n            Array.prototype.forEach.call(this.DOMResults.getElementsByTagName(\"li\"), function (li) {\n              if (li.getAttribute(\"class\") != \"locked\") {\n                li.onmousedown = function () {\n                  params._Select(li);\n                };\n              }\n            });\n          },\n          _Select: function (item) {\n            AutoComplete.defaults._Select.call(this, item);\n            var form = item.closest('form');\n            if (form) {\n              form.submit();\n            }\n          },\n          _MinChars: function () {\n            if (this.Input.value.indexOf('!') > -1) {\n              return 0;\n            } else {\n              return AutoComplete.defaults._MinChars.call(this);\n            }\n          },\n          KeyboardMappings: Object.assign({}, AutoComplete.defaults.KeyboardMappings, {\n            \"KeyUpAndDown_up\": Object.assign({}, AutoComplete.defaults.KeyboardMappings.KeyUpAndDown_up, {\n              Callback: function (event) {\n                AutoComplete.defaults.KeyboardMappings.KeyUpAndDown_up.Callback.call(this, event);\n                var liActive = this.DOMResults.querySelector(\"li.active\");\n                if (liActive) {\n                  AutoComplete.defaults._Select.call(this, liActive);\n                }\n              },\n            }),\n            \"Tab\": Object.assign({}, AutoComplete.defaults.KeyboardMappings.Enter, {\n              Conditions: [{\n                Is: 9,\n                Not: false\n              }],\n              Callback: function (event) {\n                if (this.DOMResults.getAttribute(\"class\").indexOf(\"open\") != -1) {\n                  var liActive = this.DOMResults.querySelector(\"li.active\");\n                  if (liActive !== null) {\n                    AutoComplete.defaults._Select.call(this, liActive);\n                    event.preventDefault();\n                  }\n                }\n              },\n            })\n          }),\n        }, \"#\" + qinput_id);\n      }\n\n      /*\n        Monkey patch autocomplete.js to fix a bug\n        With the POST method, the values are not URL encoded: query like \"1 + 1\" are sent as \"1  1\" since space are URL encoded as plus.\n        See HTML specifications:\n        * HTML5: https://url.spec.whatwg.org/#concept-urlencoded-serializer\n        * HTML4: https://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1\n\n        autocomplete.js does not URL encode the name and values:\n        https://github.com/autocompletejs/autocomplete.js/blob/87069524f3b95e68f1b54d8976868e0eac1b2c83/src/autocomplete.ts#L665\n\n        The monkey patch overrides the compiled version of the ajax function.\n        See https://github.com/autocompletejs/autocomplete.js/blob/87069524f3b95e68f1b54d8976868e0eac1b2c83/dist/autocomplete.js#L143-L158\n        The patch changes only the line 156 from\n          params.Request.send(params._QueryArg() + \"=\" + params._Pre());\n        to\n          params.Request.send(encodeURIComponent(params._QueryArg()) + \"=\" + encodeURIComponent(params._Pre()));\n\n        Related to:\n        * https://github.com/autocompletejs/autocomplete.js/issues/78\n        * https://github.com/searxng/searxng/issues/1695\n       */\n      AutoComplete.prototype.ajax = function (params, request, timeout) {\n        if (timeout === void 0) { timeout = true; }\n        if (params.$AjaxTimer) {\n          window.clearTimeout(params.$AjaxTimer);\n        }\n        if (timeout === true) {\n          params.$AjaxTimer = window.setTimeout(AutoComplete.prototype.ajax.bind(null, params, request, false), params.Delay);\n        } else {\n          if (params.Request) {\n            params.Request.abort();\n          }\n          params.Request = request;\n          params.Request.send(encodeURIComponent(params._QueryArg()) + \"=\" + encodeURIComponent(params._Pre()));\n        }\n      };\n\n      if (!isMobile && document.querySelector('.index_endpoint')) {\n        qinput.focus();\n      }\n    }\n\n    // Additionally to searching when selecting a new category, we also\n    // automatically start a new search request when the user changes a search\n    // filter (safesearch, time range or language) (this requires JavaScript\n    // though)\n    if (\n      qinput !== null\n        && searxng.settings.search_on_category_select\n      // If .search_filters is undefined (invisible) we are on the homepage and\n      // hence don't have to set any listeners\n        && d.querySelector(\".search_filters\") != null\n    ) {\n      searxng.on(d.getElementById('safesearch'), 'change', submitIfQuery);\n      searxng.on(d.getElementById('time_range'), 'change', submitIfQuery);\n      searxng.on(d.getElementById('language'), 'change', submitIfQuery);\n    }\n\n    // most common browsers at the time of writing this support :has, except for Firefox\n    // can be removed when Firefox / Firefox ESL starts supporting it as well\n    try {\n      // this fails when the browser does not support :has\n      d.querySelector(\"html:has(body)\");\n    } catch (_) {\n      // manually deselect the old selection when a new category is selected\n      for (let button of d.querySelectorAll(\"button.category_button\")) {\n        searxng.on(button, 'click', () => {\n          const selected = d.querySelector(\"button.category_button.selected\");\n          console.log(selected);\n          selected.classList.remove(\"selected\");\n        })\n      }\n    }\n  });\n\n})(window, document, window.searxng);\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.AutoComplete = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n/*\n * @license MIT\n *\n * Autocomplete.js v2.7.1\n * Developed by Baptiste Donaux\n * http://autocomplete-js.com\n *\n * (c) 2017, Baptiste Donaux\n */\n\"use strict\";\nvar ConditionOperator;\n(function (ConditionOperator) {\n    ConditionOperator[ConditionOperator[\"AND\"] = 0] = \"AND\";\n    ConditionOperator[ConditionOperator[\"OR\"] = 1] = \"OR\";\n})(ConditionOperator || (ConditionOperator = {}));\nvar EventType;\n(function (EventType) {\n    EventType[EventType[\"KEYDOWN\"] = 0] = \"KEYDOWN\";\n    EventType[EventType[\"KEYUP\"] = 1] = \"KEYUP\";\n})(EventType || (EventType = {}));\n/**\n * Core\n *\n * @class\n * @author Baptiste Donaux <baptiste.donaux@gmail.com> @baptistedonaux\n */\nvar AutoComplete = /** @class */ (function () {\n    // Constructor\n    function AutoComplete(params, selector) {\n        if (params === void 0) { params = {}; }\n        if (selector === void 0) { selector = \"[data-autocomplete]\"; }\n        if (Array.isArray(selector)) {\n            selector.forEach(function (s) {\n                new AutoComplete(params, s);\n            });\n        }\n        else if (typeof selector == \"string\") {\n            var elements = document.querySelectorAll(selector);\n            Array.prototype.forEach.call(elements, function (input) {\n                new AutoComplete(params, input);\n            });\n        }\n        else {\n            var specificParams = AutoComplete.merge(AutoComplete.defaults, params, {\n                DOMResults: document.createElement(\"div\")\n            });\n            AutoComplete.prototype.create(specificParams, selector);\n            return specificParams;\n        }\n    }\n    AutoComplete.prototype.create = function (params, element) {\n        params.Input = element;\n        if (params.Input.nodeName.match(/^INPUT$/i) && (params.Input.hasAttribute(\"type\") === false || params.Input.getAttribute(\"type\").match(/^TEXT|SEARCH$/i))) {\n            params.Input.setAttribute(\"autocomplete\", \"off\");\n            params._Position(params);\n            params.Input.parentNode.appendChild(params.DOMResults);\n            params.$Listeners = {\n                blur: params._Blur.bind(params),\n                destroy: AutoComplete.prototype.destroy.bind(null, params),\n                focus: params._Focus.bind(params),\n                keyup: AutoComplete.prototype.event.bind(null, params, EventType.KEYUP),\n                keydown: AutoComplete.prototype.event.bind(null, params, EventType.KEYDOWN),\n                position: params._Position.bind(params)\n            };\n            for (var event in params.$Listeners) {\n                params.Input.addEventListener(event, params.$Listeners[event]);\n            }\n        }\n    };\n    AutoComplete.prototype.getEventsByType = function (params, type) {\n        var mappings = {};\n        for (var key in params.KeyboardMappings) {\n            var event = EventType.KEYUP;\n            if (params.KeyboardMappings[key].Event !== undefined) {\n                event = params.KeyboardMappings[key].Event;\n            }\n            if (event == type) {\n                mappings[key] = params.KeyboardMappings[key];\n            }\n        }\n        return mappings;\n    };\n    AutoComplete.prototype.event = function (params, type, event) {\n        var eventIdentifier = function (condition) {\n            if ((match === true && mapping.Operator == ConditionOperator.AND) || (match === false && mapping.Operator == ConditionOperator.OR)) {\n                condition = AutoComplete.merge({\n                    Not: false\n                }, condition);\n                if (condition.hasOwnProperty(\"Is\")) {\n                    if (condition.Is == event.keyCode) {\n                        match = !condition.Not;\n                    }\n                    else {\n                        match = condition.Not;\n                    }\n                }\n                else if (condition.hasOwnProperty(\"From\") && condition.hasOwnProperty(\"To\")) {\n                    if (event.keyCode >= condition.From && event.keyCode <= condition.To) {\n                        match = !condition.Not;\n                    }\n                    else {\n                        match = condition.Not;\n                    }\n                }\n            }\n        };\n        for (var name in AutoComplete.prototype.getEventsByType(params, type)) {\n            var mapping = AutoComplete.merge({\n                Operator: ConditionOperator.AND\n            }, params.KeyboardMappings[name]), match = ConditionOperator.AND == mapping.Operator;\n            mapping.Conditions.forEach(eventIdentifier);\n            if (match === true) {\n                mapping.Callback.call(params, event);\n            }\n        }\n    };\n    AutoComplete.prototype.makeRequest = function (params, callback, callbackErr) {\n        var propertyHttpHeaders = Object.getOwnPropertyNames(params.HttpHeaders), request = new XMLHttpRequest(), method = params._HttpMethod(), url = params._Url(), queryParams = params._Pre(), queryParamsStringify = encodeURIComponent(params._QueryArg()) + \"=\" + encodeURIComponent(queryParams);\n        if (method.match(/^GET$/i)) {\n            if (url.indexOf(\"?\") !== -1) {\n                url += \"&\" + queryParamsStringify;\n            }\n            else {\n                url += \"?\" + queryParamsStringify;\n            }\n        }\n        request.open(method, url, true);\n        for (var i = propertyHttpHeaders.length - 1; i >= 0; i--) {\n            request.setRequestHeader(propertyHttpHeaders[i], params.HttpHeaders[propertyHttpHeaders[i]]);\n        }\n        request.onreadystatechange = function () {\n            if (request.readyState == 4 && request.status == 200) {\n                params.$Cache[queryParams] = request.response;\n                callback(request.response);\n            }\n            else if (request.status >= 400) {\n                callbackErr();\n            }\n        };\n        return request;\n    };\n    AutoComplete.prototype.ajax = function (params, request, timeout) {\n        if (timeout === void 0) { timeout = true; }\n        if (params.$AjaxTimer) {\n            window.clearTimeout(params.$AjaxTimer);\n        }\n        if (timeout === true) {\n            params.$AjaxTimer = window.setTimeout(AutoComplete.prototype.ajax.bind(null, params, request, false), params.Delay);\n        }\n        else {\n            if (params.Request) {\n                params.Request.abort();\n            }\n            params.Request = request;\n            params.Request.send(params._QueryArg() + \"=\" + params._Pre());\n        }\n    };\n    AutoComplete.prototype.cache = function (params, callback, callbackErr) {\n        var response = params._Cache(params._Pre());\n        if (response === undefined) {\n            var request = AutoComplete.prototype.makeRequest(params, callback, callbackErr);\n            AutoComplete.prototype.ajax(params, request);\n        }\n        else {\n            callback(response);\n        }\n    };\n    AutoComplete.prototype.destroy = function (params) {\n        for (var event in params.$Listeners) {\n            params.Input.removeEventListener(event, params.$Listeners[event]);\n        }\n        params.DOMResults.parentNode.removeChild(params.DOMResults);\n    };\n    AutoComplete.merge = function () {\n        var merge = {}, tmp;\n        for (var i = 0; i < arguments.length; i++) {\n            for (tmp in arguments[i]) {\n                merge[tmp] = arguments[i][tmp];\n            }\n        }\n        return merge;\n    };\n    AutoComplete.defaults = {\n        Delay: 150,\n        EmptyMessage: \"No result here\",\n        Highlight: {\n            getRegex: function (value) {\n                return new RegExp(value, \"ig\");\n            },\n            transform: function (value) {\n                return \"<strong>\" + value + \"</strong>\";\n            }\n        },\n        HttpHeaders: {\n            \"Content-type\": \"application/x-www-form-urlencoded\"\n        },\n        Limit: 0,\n        MinChars: 0,\n        HttpMethod: \"GET\",\n        QueryArg: \"q\",\n        Url: null,\n        KeyboardMappings: {\n            \"Enter\": {\n                Conditions: [{\n                        Is: 13,\n                        Not: false\n                    }],\n                Callback: function (event) {\n                    if (this.DOMResults.getAttribute(\"class\").indexOf(\"open\") != -1) {\n                        var liActive = this.DOMResults.querySelector(\"li.active\");\n                        if (liActive !== null) {\n                            event.preventDefault();\n                            this._Select(liActive);\n                            this.DOMResults.setAttribute(\"class\", \"autocomplete\");\n                        }\n                    }\n                },\n                Operator: ConditionOperator.AND,\n                Event: EventType.KEYDOWN\n            },\n            \"KeyUpAndDown_down\": {\n                Conditions: [{\n                        Is: 38,\n                        Not: false\n                    },\n                    {\n                        Is: 40,\n                        Not: false\n                    }],\n                Callback: function (event) {\n                    event.preventDefault();\n                },\n                Operator: ConditionOperator.OR,\n                Event: EventType.KEYDOWN\n            },\n            \"KeyUpAndDown_up\": {\n                Conditions: [{\n                        Is: 38,\n                        Not: false\n                    },\n                    {\n                        Is: 40,\n                        Not: false\n                    }],\n                Callback: function (event) {\n                    event.preventDefault();\n                    var first = this.DOMResults.querySelector(\"li:first-child:not(.locked)\"), last = this.DOMResults.querySelector(\"li:last-child:not(.locked)\"), active = this.DOMResults.querySelector(\"li.active\");\n                    if (active) {\n                        var currentIndex = Array.prototype.indexOf.call(active.parentNode.children, active), position = currentIndex + (event.keyCode - 39), lisCount = this.DOMResults.getElementsByTagName(\"li\").length;\n                        if (position < 0) {\n                            position = lisCount - 1;\n                        }\n                        else if (position >= lisCount) {\n                            position = 0;\n                        }\n                        active.classList.remove(\"active\");\n                        active.parentElement.children.item(position).classList.add(\"active\");\n                    }\n                    else if (last && event.keyCode == 38) {\n                        last.classList.add(\"active\");\n                    }\n                    else if (first) {\n                        first.classList.add(\"active\");\n                    }\n                },\n                Operator: ConditionOperator.OR,\n                Event: EventType.KEYUP\n            },\n            \"AlphaNum\": {\n                Conditions: [{\n                        Is: 13,\n                        Not: true\n                    }, {\n                        From: 35,\n                        To: 40,\n                        Not: true\n                    }],\n                Callback: function () {\n                    var oldValue = this.Input.getAttribute(\"data-autocomplete-old-value\"), currentValue = this._Pre();\n                    if (currentValue !== \"\" && currentValue.length >= this._MinChars()) {\n                        if (!oldValue || currentValue != oldValue) {\n                            this.DOMResults.setAttribute(\"class\", \"autocomplete open\");\n                        }\n                        AutoComplete.prototype.cache(this, function (response) {\n                            this._Render(this._Post(response));\n                            this._Open();\n                        }.bind(this), this._Error);\n                    }\n                    else {\n                        this._Close();\n                    }\n                },\n                Operator: ConditionOperator.AND,\n                Event: EventType.KEYUP\n            }\n        },\n        DOMResults: null,\n        Request: null,\n        Input: null,\n        /**\n         * Return the message when no result returns\n         */\n        _EmptyMessage: function () {\n            var emptyMessage = \"\";\n            if (this.Input.hasAttribute(\"data-autocomplete-empty-message\")) {\n                emptyMessage = this.Input.getAttribute(\"data-autocomplete-empty-message\");\n            }\n            else if (this.EmptyMessage !== false) {\n                emptyMessage = this.EmptyMessage;\n            }\n            else {\n                emptyMessage = \"\";\n            }\n            return emptyMessage;\n        },\n        /**\n         * Returns the maximum number of results\n         */\n        _Limit: function () {\n            var limit = this.Input.getAttribute(\"data-autocomplete-limit\");\n            if (isNaN(limit) || limit === null) {\n                return this.Limit;\n            }\n            return parseInt(limit, 10);\n        },\n        /**\n         * Returns the minimum number of characters entered before firing ajax\n         */\n        _MinChars: function () {\n            var minchars = this.Input.getAttribute(\"data-autocomplete-minchars\");\n            if (isNaN(minchars) || minchars === null) {\n                return this.MinChars;\n            }\n            return parseInt(minchars, 10);\n        },\n        /**\n         * Apply transformation on labels response\n         */\n        _Highlight: function (label) {\n            return label.replace(this.Highlight.getRegex(this._Pre()), this.Highlight.transform);\n        },\n        /**\n         * Returns the HHTP method to use\n         */\n        _HttpMethod: function () {\n            if (this.Input.hasAttribute(\"data-autocomplete-method\")) {\n                return this.Input.getAttribute(\"data-autocomplete-method\");\n            }\n            return this.HttpMethod;\n        },\n        /**\n         * Returns the query param to use\n         */\n        _QueryArg: function () {\n            if (this.Input.hasAttribute(\"data-autocomplete-param-name\")) {\n                return this.Input.getAttribute(\"data-autocomplete-param-name\");\n            }\n            return this.QueryArg;\n        },\n        /**\n         * Returns the URL to use for AJAX request\n         */\n        _Url: function () {\n            if (this.Input.hasAttribute(\"data-autocomplete\")) {\n                return this.Input.getAttribute(\"data-autocomplete\");\n            }\n            return this.Url;\n        },\n        /**\n         * Manage the close\n         */\n        _Blur: function (now) {\n            if (now === void 0) { now = false; }\n            if (now) {\n                this._Close();\n            }\n            else {\n                var params = this;\n                setTimeout(function () {\n                    params._Blur(true);\n                }, 150);\n            }\n        },\n        /**\n         * Manage the cache\n         */\n        _Cache: function (value) {\n            return this.$Cache[value];\n        },\n        /**\n         * Manage the open\n         */\n        _Focus: function () {\n            var oldValue = this.Input.getAttribute(\"data-autocomplete-old-value\");\n            if ((!oldValue || this.Input.value != oldValue) && this._MinChars() <= this.Input.value.length) {\n                this.DOMResults.setAttribute(\"class\", \"autocomplete open\");\n            }\n        },\n        /**\n         * Bind all results item if one result is opened\n         */\n        _Open: function () {\n            var params = this;\n            Array.prototype.forEach.call(this.DOMResults.getElementsByTagName(\"li\"), function (li) {\n                if (li.getAttribute(\"class\") != \"locked\") {\n                    li.onclick = function () {\n                        params._Select(li);\n                    };\n                }\n            });\n        },\n        _Close: function () {\n            this.DOMResults.setAttribute(\"class\", \"autocomplete\");\n        },\n        /**\n         * Position the results HTML element\n         */\n        _Position: function () {\n            this.DOMResults.setAttribute(\"class\", \"autocomplete\");\n            this.DOMResults.setAttribute(\"style\", \"top:\" + (this.Input.offsetTop + this.Input.offsetHeight) + \"px;left:\" + this.Input.offsetLeft + \"px;width:\" + this.Input.clientWidth + \"px;\");\n        },\n        /**\n         * Execute the render of results DOM element\n         */\n        _Render: function (response) {\n            var ul;\n            if (typeof response == \"string\") {\n                ul = this._RenderRaw(response);\n            }\n            else {\n                ul = this._RenderResponseItems(response);\n            }\n            if (this.DOMResults.hasChildNodes()) {\n                this.DOMResults.removeChild(this.DOMResults.childNodes[0]);\n            }\n            this.DOMResults.appendChild(ul);\n        },\n        /**\n         * ResponseItems[] rendering\n         */\n        _RenderResponseItems: function (response) {\n            var ul = document.createElement(\"ul\"), li = document.createElement(\"li\"), limit = this._Limit();\n            // Order\n            if (limit < 0) {\n                response = response.reverse();\n            }\n            else if (limit === 0) {\n                limit = response.length;\n            }\n            for (var item = 0; item < Math.min(Math.abs(limit), response.length); item++) {\n                li.innerHTML = response[item].Label;\n                li.setAttribute(\"data-autocomplete-value\", response[item].Value);\n                ul.appendChild(li);\n                li = document.createElement(\"li\");\n            }\n            return ul;\n        },\n        /**\n         * string response rendering (RAW HTML)\n         */\n        _RenderRaw: function (response) {\n            var ul = document.createElement(\"ul\"), li = document.createElement(\"li\");\n            if (response.length > 0) {\n                this.DOMResults.innerHTML = response;\n            }\n            else {\n                var emptyMessage = this._EmptyMessage();\n                if (emptyMessage !== \"\") {\n                    li.innerHTML = emptyMessage;\n                    li.setAttribute(\"class\", \"locked\");\n                    ul.appendChild(li);\n                }\n            }\n            return ul;\n        },\n        /**\n         * Deal with request response\n         */\n        _Post: function (response) {\n            try {\n                var returnResponse = [];\n                //JSON return\n                var json = JSON.parse(response);\n                if (Object.keys(json).length === 0) {\n                    return \"\";\n                }\n                if (Array.isArray(json)) {\n                    for (var i = 0; i < Object.keys(json).length; i++) {\n                        returnResponse[returnResponse.length] = { \"Value\": json[i], \"Label\": this._Highlight(json[i]) };\n                    }\n                }\n                else {\n                    for (var value in json) {\n                        returnResponse.push({\n                            \"Value\": value,\n                            \"Label\": this._Highlight(json[value])\n                        });\n                    }\n                }\n                return returnResponse;\n            }\n            catch (event) {\n                //HTML return\n                return response;\n            }\n        },\n        /**\n         * Return the autocomplete value to send (before request)\n         */\n        _Pre: function () {\n            return this.Input.value;\n        },\n        /**\n         * Choice one result item\n         */\n        _Select: function (item) {\n            if (item.hasAttribute(\"data-autocomplete-value\")) {\n                this.Input.value = item.getAttribute(\"data-autocomplete-value\");\n            }\n            else {\n                this.Input.value = item.innerHTML;\n            }\n            this.Input.setAttribute(\"data-autocomplete-old-value\", this.Input.value);\n        },\n        /**\n         * Handle HTTP error on the request\n         */\n        _Error: function () {\n        },\n        $AjaxTimer: null,\n        $Cache: {},\n        $Listeners: {}\n    };\n    return AutoComplete;\n}());\nmodule.exports = AutoComplete;\n\n},{}]},{},[1])(1)\n});\n"],"names":["window","searxng","w","d","Element","ElementPrototype","matches","matchesSelector","webkitMatchesSelector","msMatchesSelector","selector","node","this","nodes","parentNode","document","querySelectorAll","i","prototype","callbackSafe","callback","el","e","call","exception","console","log","on","obj","eventType","useCapture","addEventListener","target","srcElement","found","parentElement","ready","readyState","bind","http","method","url","data","Promise","resolve","reject","req","XMLHttpRequest","open","timeout","onload","status","response","responseType","Error","statusText","onerror","onabort","ontimeout","send","ex","loadStyle","src","path","settings","theme_static_path","id","replace","s","getElementById","createElement","setAttribute","body","appendChild","loadScript","hasAttribute","apply","insertBefore","newNode","referenceNode","insertAfter","nextSibling","classList","add","getEndpoint","className","getElementsByTagName","values","endsWith","split","endpoint","defaultFavicon","addFavicons","forEach","querySelector","link","href","host","URL","icon","currentDomain","location","hostname","alt","prepend","observer","MutationObserver","mutations","mutation","type","addedNodes","nodeType","resultsContainer","observe","childList","subtree","infinite_scroll_supported","IntersectionObserverEntry","let","onlyImages","contains","newLoadSpinner","loader","replaceChildrenWith","element","children","textContent","child","loadNextPage","form","formData","FormData","getAttribute","then","nextPageDoc","DOMParser","parseFromString","articleList","paginationElement","remove","length","articleElement","catch","err","translations","error_loading_next_page","infinite_scroll","intersectionObserveOptions","rootMargin","observedSelector","IntersectionObserver","entries","paginationEntry","isIntersecting","unobserve","isElementInDetail","undefined","getResultElement","isImageResult","resultElement","highlightResult","preventDefault","selectImage","baseKeyBinding","Escape","key","fun","removeFocus","des","cat","c","copyURLToClipboard","h","toggleHelp","searchInputFocus","n","GoToNextPage","o","openResult","p","GoToPreviousPage","r","reloadPage","t","keyBindingLayouts","default","Object","assign","ArrowLeft","ArrowRight","vim","b","scrollPage","innerHeight","f","u","g","scrollPageTo","scrollHeight","v","k","j","y","keyBindings","hotkeys","hasOwnProperty","ctrlKey","altKey","shiftKey","metaKey","tagName","toLowerCase","which","noScroll","keepFocus","current","effectiveWhich","next","results","Array","from","top","documentElement","scrollTop","bot","clientHeight","etop","offsetTop","ebot","indexOf","removeAttribute","focus","scrollPageToSelected","reload","activeElement","blur","closeDetail","pageButtonClick","css_selector","button","click","sel","wtop","wheight","offset","previousElementSibling","scroll","scrollX","wbot","amount","scrollBy","position","nav","scrollTo","q","setSelectionRange","len","value","newTab","initHelpContent","divElement","categories","push","sorted","keys","sort","a","html","lastCategory","first","cj","innerHTML","helpPanel","toggle","currentUrlElement","navigator","clipboard","writeText","selectNext","selectPrevious","event","leaflet_target","dataset","leafletTarget","map_lon","parseFloat","mapLon","map_lat","mapLat","map_zoom","mapZoom","map_boundingbox","JSON","parse","mapBoundingbox","map_geojson","mapGeojson","map_bounds","southWest","L","latLng","northEast","latLngBounds","map","osmMapnikUrl","osmMapnikAttrib","osmMapnik","TileLayer","minZoom","maxZoom","attribution","osmWikimediaUrl","osmWikimediaAttrib","osmWikimedia","setTimeout","fitBounds","setView","addLayer","baseLayers","OSM Mapnik","OSM Wikimedia","control","layers","addTo","geoJson","engine_descriptions","load_engine_descriptions","content","engine_name","description","elements","source","Source","enableAllEngines","disableAllEngines","engineToggles","toggleEngines","offsetParent","checked","enable","copyHashButton","hash","innerText","copiedText","img","style","display","error","btnLabelCollapsed","btnLabelNotCollapsed","targetElement","iframe_load","srctest","imgElement","thumbnailElement","detailElement","imgSrc","imgLoader","Image","qinput_id","qinput","isMobile","matchMedia","submitIfQuery","search","submit","createClearButton","cs","updateClearButton","ev","autocomplete_provider","autocomplete","AutoComplete","Url","EmptyMessage","no_item_found","HttpMethod","http_method","HttpHeaders","Content-type","X-Requested-With","MinChars","autocomplete_min","Delay","_Position","_Open","params","DOMResults","li","onmousedown","_Select","item","defaults","closest","_MinChars","Input","KeyboardMappings","KeyUpAndDown_up","Callback","liActive","Tab","Enter","Conditions","Is","Not","ajax","request","$AjaxTimer","clearTimeout","Request","abort","encodeURIComponent","_QueryArg","_Pre","search_on_category_select","_","selected","exports","module","define","amd","global","self","require","code","1","ConditionOperator","EventType","isArray","input","specificParams","merge","create","nodeName","match","$Listeners","_Blur","destroy","_Focus","keyup","KEYUP","keydown","KEYDOWN","getEventsByType","mappings","Event","eventIdentifier","condition","mapping","Operator","AND","OR","keyCode","From","To","name","makeRequest","callbackErr","propertyHttpHeaders","getOwnPropertyNames","_HttpMethod","_Url","queryParams","queryParamsStringify","setRequestHeader","onreadystatechange","$Cache","cache","_Cache","removeEventListener","removeChild","tmp","arguments","Highlight","getRegex","RegExp","transform","Limit","QueryArg","KeyUpAndDown_down","last","active","currentIndex","lisCount","AlphaNum","oldValue","currentValue","_Render","_Post","_Error","_Close","_EmptyMessage","emptyMessage","_Limit","limit","isNaN","parseInt","minchars","_Highlight","label","now","onclick","offsetHeight","offsetLeft","clientWidth","ul","_RenderRaw","_RenderResponseItems","hasChildNodes","childNodes","reverse","Math","min","abs","Label","Value","returnResponse","json"],"mappings":"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"}